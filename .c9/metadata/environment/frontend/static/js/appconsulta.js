{"filter":false,"title":"appconsulta.js","tooltip":"/frontend/static/js/appconsulta.js","undoManager":{"mark":16,"position":16,"stack":[[{"start":{"row":0,"column":0},"end":{"row":2,"column":1},"action":"remove","lines":["function consult_user(){","    alert(\"consulta\")","}"],"id":2},{"start":{"row":0,"column":0},"end":{"row":49,"column":0},"action":"insert","lines":["function consult_user() {","    // Obtener el valor del campo de entrada para la búsqueda","    var identidad = document.querySelector(\".input-busqueda\").value;","","    if (!identidad) {  // Validar que el campo no esté vacío","        alert(\"Por favor, ingrese un número de identidad.\");","        return;","    }","","    // Realizar una solicitud GET para obtener datos del usuario","    fetch('/consult_user?identidad=' + identidad)","    .then(response => {","        if (!response.ok) {  // Manejar errores en la respuesta","            throw new Error(\"Usuario no encontrado o error en la consulta\");","        }","        return response.json();  // Convertir la respuesta a JSON","    })","    .then(data => {","        // Obtener la referencia a la tabla de resultados","        var tablaResultados = document.getElementById(\"resultados\");","","        // Limpiar contenido existente en la tabla","        while (tablaResultados.firstChild) {","            tablaResultados.removeChild(tablaResultados.firstChild);","        }","","        // Crear una fila y agregar datos","        var fila = document.createElement(\"tr\");","","        fila.innerHTML = `","            <td>${data.nombre}</td>","            <td>${data.apellido}</td>","            <td>${data.genero}</td>","            <td>${data.fechaNacimiento}</td>","            <td>${data.identidad}</td>","            <td>${data.email}</td>","            <td><center>${data.profile_pic ? '<img src=\"data:image/png;base64,' + data.profile_pic + '\" alt=\"Imagen de perfil\">' : 'No hay imagen'}</center></td>","        `;","","        // Agregar la fila a la tabla","        tablaResultados.appendChild(fila);","","        alert(\"Consulta realizada con éxito\");  // Mensaje de éxito","    })","    .catch(error => {","        console.error(\"Error durante la consulta:\", error);  // Manejo de errores","        alert(\"Error durante la consulta o usuario no encontrado\");","    });","}",""]}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":0,"column":0},"end":{"row":16,"column":1},"action":"insert","lines":["// Función para mostrar mensajes de error o éxito","function mostrarMensaje(tipo, texto) {","    var mensajeError = document.getElementById(\"mensaje-error\");","    var mensajeExito = document.getElementById(\"mensaje-exito\");","","    // Ocultar ambos mensajes antes de mostrar el adecuado","    mensajeError.style.display = \"none\";","    mensajeExito.style.display = \"none\";","","    if (tipo === \"error\") {","        mensajeError.textContent = texto;  // Texto del mensaje de error","        mensajeError.style.display = \"block\";  // Mostrar mensaje de error","    } else if (tipo === \"exito\") {","        mensajeExito.textContent = texto;  // Texto del mensaje de éxito","        mensajeExito.style.display = \"block\";  // Mostrar mensaje de éxito","    }","}"],"id":5}],[{"start":{"row":54,"column":12},"end":{"row":54,"column":161},"action":"remove","lines":["<td><center>${data.profile_pic ? '<img src=\"data:image/png;base64,' + data.profile_pic + '\" alt=\"Imagen de perfil\">' : 'No hay imagen'}</center></td>"],"id":9}],[{"start":{"row":57,"column":37},"end":{"row":57,"column":186},"action":"insert","lines":["<td><center>${data.profile_pic ? '<img src=\"data:image/png;base64,' + data.profile_pic + '\" alt=\"Imagen de perfil\">' : 'No hay imagen'}</center></td>"],"id":10}],[{"start":{"row":25,"column":5},"end":{"row":26,"column":0},"action":"insert","lines":["",""],"id":11},{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":21,"column":0},"end":{"row":22,"column":0},"action":"insert","lines":["",""],"id":13},{"start":{"row":22,"column":0},"end":{"row":23,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":22,"column":0},"end":{"row":26,"column":1},"action":"insert","lines":["// Validación adicional si se espera un formato específico (por ejemplo, solo números)","if (isNaN(identidad)) {","    mostrarMensaje(\"error\", \"El número de identidad debe ser un valor numérico.\");","    return;","}"],"id":14}],[{"start":{"row":22,"column":0},"end":{"row":22,"column":2},"action":"insert","lines":["  "],"id":15},{"start":{"row":23,"column":0},"end":{"row":23,"column":2},"action":"insert","lines":["  "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["  "]},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "]},{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":22,"column":0},"end":{"row":22,"column":2},"action":"insert","lines":["  "],"id":16},{"start":{"row":23,"column":0},"end":{"row":23,"column":2},"action":"insert","lines":["  "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["  "]},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "]},{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":22,"column":0},"end":{"row":22,"column":2},"action":"insert","lines":["  "],"id":17},{"start":{"row":23,"column":0},"end":{"row":23,"column":2},"action":"insert","lines":["  "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["  "]},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "]},{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":36,"column":23},"end":{"row":37,"column":0},"action":"insert","lines":["",""],"id":28},{"start":{"row":37,"column":0},"end":{"row":37,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":37,"column":6},"end":{"row":38,"column":8},"action":"insert","lines":[" console.log(\"Estado de la respuesta:\", response.status);  // Verificar estado de la respuesta","        "],"id":29}],[{"start":{"row":38,"column":6},"end":{"row":38,"column":8},"action":"remove","lines":["  "],"id":30},{"start":{"row":38,"column":4},"end":{"row":38,"column":6},"action":"remove","lines":["  "]},{"start":{"row":38,"column":2},"end":{"row":38,"column":4},"action":"remove","lines":["  "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":2},"action":"remove","lines":["  "]},{"start":{"row":37,"column":100},"end":{"row":38,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":43,"column":19},"end":{"row":44,"column":0},"action":"insert","lines":["",""],"id":31},{"start":{"row":44,"column":0},"end":{"row":44,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":44,"column":6},"end":{"row":45,"column":0},"action":"insert","lines":[" console.log(\"Datos recibidos:\", data);  // Verificar datos recibidos",""],"id":32}]]},"ace":{"folds":[],"scrolltop":480,"scrollleft":0,"selection":{"start":{"row":35,"column":32},"end":{"row":35,"column":32},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":25,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1715223833418,"hash":"75836dd07597207f13dd82daf6b73389228f4b4c"}